(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{59:function(e,t,n){},70:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(24),s=n.n(a),i=(n(59),n(9)),l=n(34),o=n(8),j=n(74),h=n(75),d=n(1),u=function(){return Object(d.jsxs)(j.a,{children:[Object(d.jsx)("h1",{children:"PC GameFinder"}),Object(d.jsx)("p",{children:"Find the lowest prices for your next PC game! PC Gamefinder searches all over the internet to find you the best deal."}),Object(d.jsx)(h.a,{href:"deals",children:"Search Games"})]})},b=n(84),O=n(76),x=n(50),m=n(81),g=n(77),p=n(52),f=function(e){var t=e.name,n=e.price,r=e.deleteAlert,a=e.alertID,s=e.title,l=e.updateAlert,o=Object(c.useState)(""),j=Object(i.a)(o,2),u=j[0],f=j[1],v=Object(c.useState)(""),y=Object(i.a)(v,2),w=y[0],C=y[1],S=function(e){"newName"===e.target.name&&f(e.target.value),"newPrice"===e.target.name&&C(e.target.value)};return Object(d.jsxs)("div",{children:[Object(d.jsx)(b.a,{style:{margin:"auto",width:"50%"},children:Object(d.jsxs)(b.a.Body,{children:[Object(d.jsxs)(b.a.Title,{children:["Name: ",t]}),Object(d.jsxs)(O.a,{className:"list-group-flush",children:[Object(d.jsxs)(x.a,{children:["Game Title: ",s]}),Object(d.jsxs)(x.a,{children:["Maximum Price: $",n,".00"]}),Object(d.jsx)("br",{})]}),Object(d.jsxs)(m.a,{onSubmit:function(e){return e.preventDefault(),l(a,u,w)},children:[Object(d.jsxs)(g.a,{children:[Object(d.jsx)(p.a,{children:Object(d.jsx)(m.a.Control,{placeholder:"Name",onChange:S,name:"newName",value:u})}),Object(d.jsx)(p.a,{children:Object(d.jsx)(m.a.Control,{placeholder:"Price",onChange:S,name:"newPrice",value:w})}),Object(d.jsx)(p.a,{children:Object(d.jsx)(h.a,{variant:"primary",type:"submit",style:{margin:"auto",width:"200px"},children:"Update"})})]}),Object(d.jsx)("hr",{})]}),Object(d.jsx)(h.a,{variant:"secondary",onClick:function(){return r(a)},style:{margin:"auto",width:"200px"},children:"Delete"})]})}),Object(d.jsx)("br",{})]})},v=function(e){var t=e.user,n=Object(c.useState)([]),r=Object(i.a)(n,2),a=r[0],s=r[1];Object(c.useEffect)((function(){return l()}),[]);var l=function(){fetch("users/"+t.id+"/alerts").then((function(e){return e.json()})).then((function(e){return s(e)})).catch((function(e){return console.log("error = ",e)}))},o=function(e){console.log("DELETE WORKING");fetch("alerts/"+e,{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){console.log(e),window.location.reload()})).catch((function(e){return console.log("delete err = ",e)}))},j=function(e,t,n){console.log("updateAlert = ",e,t,n);var c={method:"PATCH",headers:{"Content-type":"application/json"},body:JSON.stringify({name:t,price:n})};fetch("alerts/"+e,c).then((function(e){return e.json()})).then((function(e){console.log(e),window.location.reload()})).catch((function(e){return console.log("delete err = ",e)}))};return Object(d.jsxs)("div",{children:[Object(d.jsx)("hr",{}),Object(d.jsx)("br",{}),0===a.length?Object(d.jsx)("h1",{children:"No Active Alerts"}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:"Your Alerts"}),function(){if(a)return a.map((function(e,t){return Object(d.jsx)(f,{name:e.name,title:e.title,price:e.price,alertID:e.id,deleteAlert:o,updateAlert:j},t)}))}()]})]})},y=n(80),w=function(e){var t=e.user,n=e.title,r=e.thumb,a=e.price,s=e.cheapestID,l=e.gameID,o=e.loggedin,j="https://www.cheapshark.com/redirect?dealID={"+s+"}",u=Object(c.useState)(!1),f=Object(i.a)(u,2),w=f[0],C=f[1],S=Object(c.useState)(""),L=Object(i.a)(S,2),N=L[0],I=L[1],P=Object(c.useState)(""),D=Object(i.a)(P,2),A=D[0],E=D[1],k=function(){return C(!1)},T=function(e){"alertName"===e.target.name&&I(e.target.value),"maxPrice"===e.target.name&&E(e.target.value)};return Object(d.jsxs)("div",{children:[Object(d.jsxs)(b.a,{style:{width:"18rem",height:"25rem"},children:[Object(d.jsx)(b.a.Img,{variant:"top",src:r,style:{height:"10rem",objectFit:"cover"}}),Object(d.jsx)(b.a.Body,{children:Object(d.jsx)(b.a.Title,{children:n})}),Object(d.jsx)(O.a,{className:"list-group-flush",children:Object(d.jsx)(x.a,{children:Object(d.jsxs)("h5",{children:["Current Deal: $",a]})})}),o?Object(d.jsx)(h.a,{variant:"primary",onClick:function(){return C(!0)},children:"Create Alert"}):Object(d.jsxs)(d.Fragment,{children:[" ",Object(d.jsx)("br",{})," ",Object(d.jsx)("h4",{children:"Login to create alerts"})," "]}),Object(d.jsx)(b.a.Body,{children:Object(d.jsx)(b.a.Link,{href:j,children:"Link to Deal"})})]}),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(y.a,{show:w,onHide:k,children:[Object(d.jsx)(y.a.Header,{closeButton:!0,children:Object(d.jsx)(y.a.Title,{children:"New Alert"})}),Object(d.jsxs)(y.a.Body,{children:[n,Object(d.jsx)(m.a,{onSubmit:function(e){e.preventDefault();var c={method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({title:n,game_code:l,alerts:[{name:N,title:n,price:A,user_id:t.id}]})};fetch("/add_game",c).then((function(e){return e.json()})).then((function(e){console.log("Alert and game saved = ",e)}))},children:Object(d.jsxs)(g.a,{children:[Object(d.jsx)(p.a,{children:Object(d.jsx)(m.a.Control,{placeholder:"Alert Name",onChange:T,name:"alertName",value:N})}),Object(d.jsx)(p.a,{children:Object(d.jsx)(m.a.Control,{placeholder:"Max Price",onChange:T,name:"maxPrice",value:A})}),Object(d.jsx)(p.a,{children:Object(d.jsx)(h.a,{variant:"primary",type:"submit",onClick:k,children:"Create Alert"})})]})}),Object(d.jsx)(v,{user:t,title:n})]})]})}),Object(d.jsx)("br",{})]})},C=n(51),S=n(78),L=function(e){var t=e.user,n=e.loggedin,r=Object(c.useState)(""),a=Object(i.a)(r,2),s=a[0],l=a[1],o=Object(c.useState)([]),j=Object(i.a)(o,2),u=j[0],b=j[1],O=function(){console.log("create alert = "+t)};return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"SEARCH GAMES"}),Object(d.jsxs)(m.a,{inline:!0,onSubmit:function(e){e.preventDefault();var t=e.target.firstElementChild.value;fetch("https://www.cheapshark.com/api/1.0/games?title="+t+"&limit=60&exact=0").then((function(e){return e.json()})).then((function(e){b(e)})).catch((function(e){return console.log("error =",e)}))},style:{margin:"auto",width:"40%"},children:[Object(d.jsx)(C.a,{type:"text",placeholder:"Enter Game Title",className:"mr-sm-2",onChange:function(e){l(e.target.value)},name:"search",value:s}),Object(d.jsx)("br",{}),Object(d.jsx)(h.a,{variant:"primary",type:"submit",children:"Search"}),Object(d.jsx)("hr",{})]}),Object(d.jsx)("br",{}),Object(d.jsx)(S.a,{children:0===Object.keys(u).length?null:u.map((function(e,c){return Object(d.jsx)(w,{title:e.external,gameID:e.gameID,user:t,createAlert:O,loggedin:n,price:e.cheapest,cheapestID:e.cheapestDealID,thumb:e.thumb},c)}))})]})},N=function(e){var t=e.setUser,n=e.setLoggedIn,r=Object(c.useState)(""),a=Object(i.a)(r,2),s=a[0],l=a[1],j=Object(c.useState)(""),u=Object(i.a)(j,2),b=u[0],O=u[1],x=Object(o.f)(),g=function(e){"email"===e.target.name&&l(e.target.value),"password"===e.target.name&&O(e.target.value)};return Object(d.jsxs)("div",{className:"login-form",children:[Object(d.jsx)("h1",{children:"Welcome Back!"}),Object(d.jsxs)(m.a,{onSubmit:function(e){e.preventDefault();var c={method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({email:s,password:b})};fetch("login",c).then((function(e){return e.json()})).then((function(e){console.log(e),e.id&&(t(e),n(!0),x.push("/"))})).catch((function(e){return console.log("error =",e)}))},style:{margin:"auto",width:"50%"},children:[Object(d.jsxs)(m.a.Group,{className:"mb-4",controlId:"formBa  cEmail",children:[Object(d.jsx)(m.a.Label,{children:"Email address"}),Object(d.jsx)(m.a.Control,{type:"email",placeholder:"Enter email",onChange:g,name:"email",value:s})]}),Object(d.jsxs)(m.a.Group,{className:"mb-4",controlId:"formBasicPassword",children:[Object(d.jsx)(m.a.Label,{children:"Password"}),Object(d.jsx)(m.a.Control,{type:"password",placeholder:"Password",onChange:g,name:"password",value:b})]}),Object(d.jsx)(h.a,{variant:"primary",type:"submit",children:"Login"})]})]})},I=function(e){var t=e.setUser,n=e.setLoggedin,r=Object(c.useState)(""),a=Object(i.a)(r,2),s=a[0],l=a[1],j=Object(c.useState)(""),u=Object(i.a)(j,2),b=u[0],O=u[1],x=Object(o.f)(),g=function(e){"email"===e.target.name&&l(e.target.value),"password"===e.target.name&&O(e.target.value)};return Object(d.jsxs)("div",{className:"login-form",children:[Object(d.jsx)("h1",{children:"Sign Up"}),Object(d.jsxs)(m.a,{onSubmit:function(e){e.preventDefault();var c={method:"POST",headers:{"Content-type":"application/json",Accepts:"application/json"},body:JSON.stringify({email:s,password:b})};fetch("signup",c).then((function(e){return e.json()})).then((function(e){t(e),n(!0),x.push("/")})).catch((function(e){return console.log(e)}))},style:{margin:"auto",width:"35%"},children:[Object(d.jsxs)(m.a.Group,{className:"mb-4",controlId:"formBasicEmail",children:[Object(d.jsx)(m.a.Label,{}),Object(d.jsx)(m.a.Control,{type:"email",placeholder:"Enter email",onChange:g,name:"email",value:s})]}),Object(d.jsxs)(m.a.Group,{className:"mb-4",controlId:"formBasicPassword",children:[Object(d.jsx)(m.a.Label,{}),Object(d.jsx)(m.a.Control,{type:"password",placeholder:"Password",onChange:g,name:"password",value:b})]}),Object(d.jsx)(h.a,{variant:"primary",type:"submit",children:" Signup "})]})]})},P=function(e){var t=e.user;return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Profile Info"}),Object(d.jsx)(O.a,{variant:"flush",style:{width:"50%",margin:"auto"},children:Object(d.jsxs)(O.a.Item,{children:["email: ",t.email]})}),Object(d.jsx)(v,{user:t})]})},D=function(){return Object(d.jsx)("div",{children:Object(d.jsx)("h1",{children:"No page matches your search."})})},A=n(82),E=n(79),k=n(83),T=function(e){var t=e.loggedin,n=e.handleLogout;return Object(d.jsx)("div",{children:Object(d.jsx)(A.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:Object(d.jsxs)(E.a,{children:[Object(d.jsx)(A.a.Brand,{href:"/",children:"PC GameFinder"}),Object(d.jsx)(A.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(d.jsxs)(A.a.Collapse,{id:"responsive-navbar-nav",children:[Object(d.jsxs)(k.a,{className:"me-auto",children:[Object(d.jsx)(k.a.Link,{href:"deals",children:"Search Games"}),Object(d.jsx)(k.a.Link,{href:"alerts",children:"Alerts"})]}),Object(d.jsx)(k.a,{children:t?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(k.a.Link,{onClick:n,children:"Logout"}),Object(d.jsx)(k.a.Link,{eventKey:2,href:"profile",children:"Account"})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(k.a.Link,{href:"login",children:"Login"}),Object(d.jsx)(k.a.Link,{eventKey:2,href:"register",children:"Register"})]})})]})]})})})};n(70);var B=function(){var e=Object(c.useState)({}),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),s=Object(i.a)(a,2),j=s[0],h=s[1];Object(c.useEffect)((function(){b()}),[]);var b=function(){fetch("/me").then((function(e){return e.json()})).then((function(e){console.log("current user: ",e),e.error||(r(e),h(!0))})).catch((function(e){return console.log("error =",e)}))};return Object(d.jsx)(l.a,{children:Object(d.jsx)("div",{className:"App",children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(T,{loggedin:j,handleLogout:function(){fetch("/logout",{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){h(!1),r({}),console.log(e)})).catch((function(e){return console.log("error =",e)}))}}),Object(d.jsxs)(o.c,{children:[Object(d.jsx)(o.a,{exact:!0,path:"/",component:u}),Object(d.jsx)(o.a,{exact:!0,path:"/login",children:Object(d.jsx)(N,{setUser:r,setLoggedIn:h})}),Object(d.jsx)(o.a,{exact:!0,path:"/register",children:Object(d.jsx)(I,{setUser:r,setLoggedin:h})}),Object(d.jsx)(o.a,{exact:!0,path:"/alerts",children:j?Object(d.jsx)(v,{user:n}):Object(d.jsx)(N,{setUser:r,setLoggedIn:h})}),Object(d.jsx)(o.a,{exact:!0,path:"/profile",children:j?Object(d.jsx)(P,{user:n,setLoggedin:h}):Object(d.jsx)(N,{setUser:r,setLoggedIn:h})}),Object(d.jsx)(o.a,{exact:!0,path:"/deals",children:Object(d.jsx)(L,{user:n,loggedin:j})}),Object(d.jsx)(o.a,{component:D})]})]})})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,85)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};n(71);s.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(B,{})}),document.getElementById("root")),F()}},[[72,1,2]]]);
//# sourceMappingURL=main.bd240023.chunk.js.map